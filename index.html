<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–§–µ—è –≤–æ–ª—à–µ–±–Ω–æ–≥–æ —à–æ—É ‚ú®</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: radial-gradient(circle at center, #1a005a, #000);
    font-family: 'Comic Sans MS', cursive;
  }
  canvas { display: block; }
  #text {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    color: white;
    background: rgba(0,0,0,0.4);
    padding: 8px 12px;
    border-radius: 12px;
    font-size: 18px;
  }
</style>
</head>
<body>
<div id="text">üßö –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –≤–æ–ª—à–µ–±–Ω–æ–µ —à–æ—É!</div>
<canvas id="fairyCanvas"></canvas>

<!-- –§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞ -->
<audio id="music" src="https://cdn.pixabay.com/audio/2023/03/28/audio_4d8f4c6f5c.mp3" loop></audio>

<script>
const canvas = document.getElementById('fairyCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const fairyImg = new Image();
fairyImg.src = "https://cdn.pixabay.com/photo/2017/01/31/15/00/fairy-2023733_1280.png";

const music = document.getElementById("music");

let x = canvas.width / 2;
let y = canvas.height / 2;
let dx = 1.5;
let dy = 1.2;
let angle = 0;
let sparkles = [];

function drawFairy() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // –ü—ã–ª—å—Ü–∞ —Ñ–µ–∏ (—á–∞—Å—Ç–∏—Ü—ã)
  for (let i = 0; i < sparkles.length; i++) {
    const s = sparkles[i];
    ctx.beginPath();
    ctx.fillStyle = `rgba(255, ${200 + Math.random()*55}, 255, ${s.alpha})`;
    ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
    ctx.fill();
    s.x += s.vx;
    s.y += s.vy;
    s.alpha -= 0.01;
  }
  sparkles = sparkles.filter(s => s.alpha > 0);

  // –°–∏—è–Ω–∏–µ
  const gradient = ctx.createRadialGradient(x, y, 10, x, y, 140);
  gradient.addColorStop(0, "rgba(255,180,255,0.8)");
  gradient.addColorStop(1, "rgba(0,0,0,0)");
  ctx.fillStyle = gradient;
  ctx.fillRect(x - 150, y - 150, 300, 300);

  // –§–µ—è
  let size = 180 + Math.sin(angle * 0.1) * 8;
  ctx.save();
  ctx.translate(x, y);
  ctx.rotate(Math.sin(angle * 0.05) * 0.2);
  ctx.drawImage(fairyImg, -size / 2, -size / 2, size, size);
  ctx.restore();

  // –î–æ–±–∞–≤–ª—è–µ–º –ø—ã–ª—å—Ü—É
  if (Math.random() < 0.5) {
    sparkles.push({
      x: x,
      y: y + 60,
      vx: (Math.random() - 0.5) * 2,
      vy: Math.random() * 2 + 1,
      size: Math.random() * 3 + 1,
      alpha: 1
    });
  }
}

function animate() {
  angle += 1;
  x += dx;
  y += dy;
  if (x < 100 || x > canvas.width - 100) dx = -dx;
  if (y < 100 || y > canvas.height - 100) dy = -dy;
  drawFairy();
  requestAnimationFrame(animate);
}

fairyImg.onload = animate;

// –§–µ—è –≥–æ–≤–æ—Ä–∏—Ç –ø—Ä–∏ –∫–ª–∏–∫–µ
canvas.addEventListener("click", e => {
  if (music.paused) music.play();
  const dist = Math.hypot(e.clientX - x, e.clientY - y);
  if (dist < 150) sayRandomPhrase();
});

// –ê–≤—Ç–æ-—Ä–µ—á—å –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
setInterval(sayRandomPhrase, 10000);

function sayRandomPhrase() {
  const phrases = [
    "–ü—Ä–∏–≤–µ—Ç, —è —Ñ–µ—è –∫–æ–Ω–∫—É—Ä—Å–∞!",
    "–¢—ã —Å–µ–≥–æ–¥–Ω—è —Å–∏—è–µ—à—å –∫–∞–∫ –∑–≤–µ–∑–¥–∞!",
    "–ü—É—Å—Ç—å —É–¥–∞—á–∞ –±—É–¥–µ—Ç —Å —Ç–æ–±–æ–π!",
    "–í–µ—Ä—å –≤ —á—É–¥–µ—Å–∞ ‚Äî –∏ –æ–Ω–∏ –ø—Ä–æ–∏–∑–æ–π–¥—É—Ç!",
    "–¢—ã –ø—Ä–æ—Å—Ç–æ –≤–æ–ª—à–µ–±–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫!"
  ];
  const msg = new SpeechSynthesisUtterance(
    phrases[Math.floor(Math.random() * phrases.length)]
  );
  msg.lang = "ru-RU";
  speechSynthesis.speak(msg);
}

window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
</html>
